# HandsWork Shifts

Небольшое React Native (CLI) приложение, которое показывает доступные смены для подработки на основании текущей геолокации пользователя.

## Основные возможности
- Запрашивает точный доступ к геолокации и определяет координаты пользователя.
- Выполняет запрос к `https://mobile.handswork.pro/api/shifts/map-list-unauthorized` с координатами для получения списка смен.
- Отображает список смен с краткой информацией (компания, адрес, время, ставка, рейтинги).
- Позволяет открыть подробный экран по каждой смене без повторного запроса.
- Поддерживает pull-to-refresh, повторную загрузку при ошибках и fallback, если смены отсутствуют.

## Стек
- React Native CLI (0.82)
- TypeScript
- MobX + mobx-react-lite
- React Navigation (native stack)
- react-native-gesture-handler / react-native-reanimated / react-native-screens

## Подготовка окружения
1. Node.js >= 20, npm >= 10 (см. `.nvmrc`, если используется nvm).
2. iOS: Xcode 16+ и CocoaPods `pod install` (после установки RN-зависимостей).
3. Android: Android SDK 34+, эмулятор или устройство, разрешение геолокации.
4. Установить зависимости:
   ```bash
   npm install
   ```
   Для iOS затем:
   ```bash
   cd ios && pod install
   ```

## Скрипты
- `npm start -- --reset-cache` — запустить Metro bundler.
- `npm run ios` — собрать и запустить iOS-приложение в симуляторе.
- `npm run android` — собрать и запустить на Android эмуляторе/устройстве.
- `npm run lint` — статический анализ ESLint.
- `npm test` — Jest-тесты (пока базовые из шаблона).

## Примечания по геолокации
- На iOS-симуляторе по умолчанию используется Купертино; смены появятся, если выбрать кастомную геопозицию (например, `45.039268, 38.987221` через **Features → Location → Custom Location…**).
- Если доступ к геолокации отклонён, приложение покажет ошибку и предложит повторить запрос после выдачи разрешений.

## Структура проекта
- `src/components/ui` — базовые UI-атомы (карточки, кнопки, текст, контейнер-экраны).
- `src/components/shifts` — фичевые компоненты списков и деталей смен.
- `src/screens` — навигационные экраны (список и детали).
- `src/stores` — MobX стор для работы с данными и разрешениями геолокации.
- `src/services` — API и взаимодействие с геолокацией.
- `src/types` — типы для данных, координат и т.п.

## Навигация и данные
- Стек `ShiftList -> ShiftDetails`, параметры `shiftId` передаются из списка.
- Данные деталей берутся из сторы (без повторного http-запроса); если смена исчезла, экран показывает fallback.

## Тесты/линт
Перед коммитом/публикацией: `npm run lint` и `npm test`.

## Дополнительно
- Полезно запускать `npm start` перед `npm run ios`, чтобы приложение корректно подключалось к Metro.
- Для Android требуется выдавать разрешение Location при первом запуске.
- Для работы с реальным устройством убедитесь, что устройство и Metro находятся в одной сети.
